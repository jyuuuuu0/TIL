# useEffect

> `useEffect`는 외부 시스템과 컴포넌트를 동기화하는 React Hook 이다.

React 컴포넌트는 화면을 그리는 역할만 하기 때문에

- 서버에서 데이터 가져오기
- 콘솔 로그 찍기
- 이벤트 리스너 달기
- 타이머 돌리기

이런 일들은 화면 그리기 외의 일이기 때문에 Effect(부수 효과)로 따로 관리해야 한다.

-> 그걸 담당하는 훅이 `useEffect` 이다.

useEffect는 컴포넌트가 렌더링된 이후에 특정 작업을 실행하게 해주는 훅이다.

## 기본 구조

```ts
useEffect(() => {
  // 실행할 코드
}, [의존성]);
```

1. 함수

- 언제 실행될 작업인지

2. 의존성 배열

- 언제 다시 실행할지 조건

## 코드

```ts
useEffect(() => {
  fetchUsers().then(setUsers);
}, []);
```

1. 함수 안에서 하는 일

```ts
fetchUsers().then(setUsers);
```

- 서버에서 유저 데이터를 가져오고
- 가져오면 -> `setUsers`로 상태 업데이트

2. []

의존성 배열이 빈 배열이라는 뜻은

> 컴포넌트가 처음 화면에 나타났을 때 딱 한 번만 실행한다.

상태가 바뀌더라도 리렌더링 되지 않는다.

## 의존성 배열

- [] -> 처음 한 번만 실행

```ts
useEffect(() => {
  console.log("처음에만 실행");
}, []);
```

- [id] -> id가 바뀔 때마다 실행

```ts
useEffect(() => {
  fetchUser(id);
}, [id]);
```

- 의존성 배열 생략 -> 렌더링 될 때마다 실행

```ts
useEffect(() => {
  console.log("매번 실행");
});
```
